<?php
include "../conexion.php";

$id = $_GET["id"];

if (empty($id)) {
    echo "Debe ingresar el ID del producto a modificar.";
} else {
    $sql = "SELECT * FROM Producto WHERE Id_producto = ?";
    $sentencia = $conn->prepare($sql);
    $sentencia->bind_param("i", $id);
    $sentencia->execute();
    $result = $sentencia->get_result();
    $fila = $result->fetch_assoc();

    if ($fila) {
        echo "
        <!DOCTYPE html>
        <html lang='es'>
        <head>
            <meta charset='UTF-8'>
            <meta name='viewport' content='width=device-width, initial-scale=1.0'>
            <title>Modificar Producto</title>
            <script src='https://cdn.tailwindcss.com'></script>
            <style>
                body {
                    font-family: 'Inter', sans-serif;
                    background-color: #f3f4f6;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                }
                .container {
                    max-width: 600px;
                    padding: 2rem;
                    background-color: white;
                    border-radius: 1rem;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                input[type='text'], input[type='number'] {
                    @apply w-full p-2 border border-gray-300 rounded-md mb-4;
                }
                input[type='submit'] {
                    @apply bg-green-500 text-white p-2 rounded-md hover:bg-green-600 cursor-pointer transition-colors duration-200;
                }
            </style>
        </head>
        <body>
            <div class='container'>
                <h1 class='text-2xl font-bold mb-4'>Modificar Producto ID: {$fila['Id_producto']}</h1>
                <form action='modificar.php' method='get'>
                    <input type='hidden' name='id' value='{$fila['Id_producto']}'>
                    <input type='text' name='nombre' value='{$fila['Nombre']}' required>
                    <input type='text' name='descripcion' value='{$fila['Descripcion']}' required>
                    <input type='number' name='es_personalizable' value='{$fila['es_personalizable']}' required>
                    <input type='text' name='imagen' value='{$fila['Imagen']}' required>
                    <input type='text' name='tipo' value='{$fila['Tipo']}' required>
                    <input type='submit' value='Guardar cambios'>
                </form>
                <br>
                <a href='../index.html' class='text-blue-500 hover:underline'>Volver al inicio</a>
            </div>
        </body>
        </html>
        ";
    } else {
        echo "El producto con el ID " . htmlspecialchars($id) . " no existe.";
        echo "<br><br><a href='../index.html'>Inicio</a>";
    }
}

$conn->close();
?>