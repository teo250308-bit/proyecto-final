<?php
include "../conexion.php";

$id = $_GET["id"];

if (empty($id)) {
    echo "Debe ingresar el ID del ingrediente a modificar.";
} else {
    $sql = "SELECT * FROM Ingrediente WHERE Id_ingrediente = ?";
    $sentencia = $conn->prepare($sql);
    $sentencia->bind_param("i", $id);
    $sentencia->execute();
    $result = $sentencia->get_result();
    $fila = $result->fetch_assoc();

    if ($fila) {
        echo "
        <!DOCTYPE html>
        <html lang='es'>
        <head>
            <meta charset='UTF-8'>
            <meta name='viewport' content='width=device-width, initial-scale=1.0'>
            <title>Modificar Ingrediente</title>
            <script src='https://cdn.tailwindcss.com'></script>
            <style>
                body {
                    font-family: 'Inter', sans-serif;
                    background-color: #f3f4f6;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                }
                .container {
                    max-width: 600px;
                    padding: 2rem;
                    background-color: white;
                    border-radius: 1rem;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                input[type='text'], input[type='number'], input[type='date'] {
                    @apply w-full p-2 border border-gray-300 rounded-md mb-4;
                }
                input[type='submit'] {
                    @apply bg-green-500 text-white p-2 rounded-md hover:bg-green-600 cursor-pointer transition-colors duration-200;
                }
            </style>
        </head>
        <body>
            <div class='container'>
                <h1 class='text-2xl font-bold mb-4'>Modificar Ingrediente ID: {$fila['Id_ingrediente']}</h1>
                <form action='modificar_ingrediente.php' method='get'>
                    <input type='hidden' name='id' value='{$fila['Id_ingrediente']}'>
                    <input type='text' name='nombre' value='{$fila['Nombre']}' required>
                    <input type='text' name='unidad' value='{$fila['Unidad']}' required>
                    <input type='number' step='0.01' name='gramos_litros' value='{$fila['Gramos_Litros']}' required>
                    <input type='number' name='stock_actual' value='{$fila['Stock_actual']}' required>
                    <input type='number' name='stock_minimo' value='{$fila['Stock_minimo']}' required>
                    <input type='date' name='fecha_vencimiento' value='{$fila['Fecha_vencimiento']}' required>
                    <input type='number' name='calorias' value='{$fila['Calorias']}' required>
                    <input type='number' name='grasas' value='{$fila['Grasas']}' required>
                    <input type='number' name='proteinas' value='{$fila['Proteinas']}' required>
                    <input type='number' name='carbohidratos' value='{$fila['Carbohidratos']}' required>
                    <input type='number' step='0.01' name='mililitros' value='{$fila['Mililitros']}'>
                    <input type='submit' value='Guardar cambios'>
                </form>
                <br>
                <a href='../index.html' class='text-blue-500 hover:underline'>Volver al inicio</a>
            </div>
        </body>
        </html>
        ";
    } else {
        echo "El ingrediente con el ID " . htmlspecialchars($id) . " no existe.";
        echo "<br><br><a href='../index.html'>Inicio</a>";
    }
}

$conn->close();
?>
